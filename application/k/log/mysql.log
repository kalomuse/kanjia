CREATE TABLE `user` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `type` int(4) NOT NULL DEFAULT '0' COMMENT '类型1.商家活动支付 101.用户购买支付',
  `password` char(32) NOT NULL DEFAULT '' COMMENT '密码',
  `role` text COMMENT '角色',
  `nickname` varchar(32) NOT NULL DEFAULT '' COMMENT '微信昵称',
  `name` varchar(32) NOT NULL DEFAULT '' COMMENT '店铺名称',
  `contact` varchar(32) NOT NULL DEFAULT '' COMMENT '手机号码',
  `address` varchar(256) NOT NULL DEFAULT '' COMMENT '店铺地址',
  `file` varchar(256) NOT NULL DEFAULT '' COMMENT '头像',
  `subscribe` int(1) DEFAULT '0' COMMENT '是否订阅',
  `sex` varchar(2) NOT NULL DEFAULT '' COMMENT '性别',
  `expire_time` int(10) DEFAULT NULL COMMENT '过期时间',
  `openid` varchar(32) DEFAULT NULL COMMENT 'openid',
  `pay_openid` varchar(32) DEFAULT NULL COMMENT '支付的openid',
  `oauth` varchar(10) DEFAULT NULL COMMENT '三方登录APP',
  `reg_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '注册时间',
  `last_login` varchar(16) DEFAULT NULL COMMENT '上次登录时间',
  `created_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `modified_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `deleted` int(4) unsigned DEFAULT '0',
  `is_pay` int(3) DEFAULT '0' COMMENT '是否支付:0没，1：有',
  `review` int(3) DEFAULT '0' COMMENT '是否通过审核,0:未提交审核, 1：审核中,2:审核通过,3审核不通过',
  `reason` varchar(256) DEFAULT '0' COMMENT '不通过理由',
  `pic` text NOT NULL COMMENT '店铺列表',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=125 DEFAULT CHARSET=utf8;

 CREATE TABLE `admin` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '所属公司id',
  `area` varchar(64) NOT NULL COMMENT '地区',
  `role` text COMMENT '角色',
  `username` char(20) NOT NULL DEFAULT '' COMMENT '用户名',
  `password` char(32) NOT NULL DEFAULT '' COMMENT '密码',
  `nickname` char(20) NOT NULL DEFAULT '' COMMENT '昵称',
  `email` char(32) NOT NULL DEFAULT '' COMMENT '邮箱',
  `mobile` char(11) NOT NULL DEFAULT '' COMMENT '手机号码',
  `created_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `modified_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `deleted` int(4) unsigned DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

CREATE TABLE `role` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `user_id` int(11) DEFAULT NULL,
  `name` varchar(32) DEFAULT NULL,
  `role` varchar(128) DEFAULT NULL,
  `area` varchar(64) NOT NULL COMMENT '地区',
  `created_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `modified_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `deleted` int(4) unsigned DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `bill` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `is_get` int(3) DEFAULT '0' COMMENT '类型0：支出1：收入',
  `type` int(3) DEFAULT '0' COMMENT '类型1：会员收入2：101：中介小费',
  `amount` decimal(10,2) DEFAULT '0.00' COMMENT '金额',
  `order_id` int(10) NOT NULL COMMENT '订单id',
  `userid` int(10) DEFAULT '0' COMMENT '用户id',
  `area` varchar(64) NOT NULL COMMENT '地区',
  `has_pay` int(3) DEFAULT '1' COMMENT '红包是否已发放',
  `created_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `modified_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `deleted` int(4) unsigned DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `orders` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `shop_id`  int(10)  not null COMMENT '店铺id',
  `product_id`  int(10)  not null COMMENT '产品id',
  `order_sn` varchar(32) NOT NULL,
  `transaction_id` varchar(32) NOT NULL COMMENT '微信订单号',
  `user_id` mediumint(8) unsigned NOT NULL DEFAULT '0' COMMENT '用户id',
  `name` varchar(64) COMMENT '用户名字',
  `mobile` char(11) NOT NULL DEFAULT '' COMMENT '手机号码',
  `server_name` varchar(255) NOT NULL DEFAULT '' COMMENT '商品名',
  `goods_price` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '商品单价',
  `low_price` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '最低价格',
  `goods_num` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '商品数量',
  `pay_status` int(4) unsigned NOT NULL DEFAULT '0' COMMENT '支付状态',
  `pay_name` varchar(120) NOT NULL DEFAULT '' COMMENT '支付方式名称',
  `order_prom_amount` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '活动优惠金额',
  `order_amount` decimal(10,2) NOT NULL DEFAULT '0.00' COMMENT '应付款金额',
  `total_amount` decimal(10,2) DEFAULT '0.00' COMMENT '订单总价',
  `type` int(3) default 0 comment '参考bill type',
  `is_get` int(3) default 0 comment '参考bill is_get',

  `add_time` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '下单时间',
  `pay_time` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '支付时间',
  `created_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `modified_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `deleted` int(4) unsigned DEFAULT '0',
  primary key(id)) DEFAULT CHARSET=utf8;


  //商品表 activity
  CREATE TABLE `product` (
    `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
    `uid` int(11) not null,
    `title` varchar(256) not null  COMMENT '活动名称',
    `number` int(5) not null  COMMENT '数量',
    `count` int(10)  COMMENT '多少次砍价到达底价',
    `old_price` decimal(10,2)  COMMENT '原价',
    `low_price` decimal(10,2) not null  COMMENT '低价',
    `start_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '开始时间',
    `end_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '结束时间',
    `desc` text not null  COMMENT '活动描述',
    `rule` text not null  COMMENT '规则',
    `first_pic` varchar(128) not null  COMMENT '头图',
    `pic` text not null  COMMENT '商品列表',
    `is_pay` int(10) not null default 0   COMMENT '是否付钱',
    `created_time` datetime DEFAULT CURRENT_TIMESTAMP,
    `modified_time` datetime DEFAULT CURRENT_TIMESTAMP,
    `deleted` int(4) unsigned DEFAULT '0',
    primary key(id)) DEFAULT CHARSET=utf8;

    //砍价表
    CREATE TABLE `kan` (
        `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
        `myuid`  int(10)  not null COMMENT '我的id',
        `hisuid`  int(10)  not null COMMENT '他的id',
        `product_id`  int(10)  not null COMMENT '砍价商品的id',

        `created_time` datetime DEFAULT CURRENT_TIMESTAMP,
        `modified_time` datetime DEFAULT CURRENT_TIMESTAMP,
        `deleted` int(4) unsigned DEFAULT '0',
        primary key(id)) DEFAULT CHARSET=utf8;




